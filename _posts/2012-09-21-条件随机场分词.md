---
layout: default
title: 条件随机场分词
---

###条件随机场###
条件随机场是用来分割和标注序列数据的。条件随机场和隐马科夫模型、随机文法相比有几点好处，包括放宽了那些模型中独立性的假设。  
HMMs 和随机文法都是生成型模型，指定一个联合概率去配对观测和标记序列；参数都要被搞成跟训练模型最相似。为了定义一个观测值和标记序列的联合概率，一个生成模型需要去枚举所有可能的观测序列，需要一个观测值是任务适用的原子实体（比如词和核苷酸）的 representation。它不适用于表现有多挣相互作用的特征或者观测值之间有长范围的依赖，因为这些模型中的引用问题难以解决。  
这个难点是主要的动机之一，把看条件模型当成一个替代品。一个条件模型指定一个给定的观察序列的可能的标记序列的概率。因此，它不需要模型在观测上花力气，因为在测试时就已经 fix 了。条件概率的标记序列可以是任意的、非独立特征的观察序列，不需要强制模型指望那些依赖分布。选择的特征可以是不同级别粒度的观测值

###算法###
我们的系统建立在条件随机场([CRF](/papers/CRF.pdf))领域的研究上, 这是一个由 Lafferty 于 2001 年首先提出的统计序列模型。Peng 于 2004 年首先将此模型运用在中文分词上。Peng 将分词当成一个二元决策任务：一个词的开头或者一个词的后继。用 [Gaussian priors](http://www.cap-lore.com/MathPhys/Gauss/GaussPrior.html) 来防止过度拟合，用 [quasi-Newton](/papers/qnewton.pdf) 来优化参数。  
对于一个特定的汉字序列，一个标记序列的概率是由 CRF 通过下面的公式赋予的：  
<pre>P<sub>λ</sub>(Y|X) = (1/Z) * e<sup>∑∑λ<sub>k</sub>f<sub>k</sub>(Y<sub>c</sub>, X, c)</sup></pre>
Y 是句子的标记序列, X 是没有分词的字符序列， Z(X) 是标准化的 term, f<sub>k</sub> 是一个特征方程，c 指向的是已经标记好的序列中的字符。  
一个 CRF 允许我们利用大量的 n-gram 特征和不同的状态序列基础特征并且也提供了一个直觉化的框架供形态特征使用。  
###特征工程###
####特征####
语义特征在我们的模型中变成 3 类：字符实体 n-grams, 形态，字符重复特征。  
对于每一种状态，字符实体特征用特征方程表示。特征方程切断字符当前、之前、之后的实体位置。我们用四种特别的 unigram 特征方程，设计成 C<sub>0</sub>（当前字符）、C<sub>1</sub>（下一个字符）、C<sub>-1</sub>（前一个字符）、C<sub>-2</sub>（两个字符后）。然后是前面四种 unigram 组合成的四种 bi-gram 特征， C<sub>-2</sub>C<sub>0</sub>, C<sub>-1</sub>C<sub>0</sub>, C<sub>0</sub>C<sub>1</sub>, C<sub>0</sub>C<sub>2</sub>.  
鉴于未知的词一般都多于 1 个字符长度，当把形态特征表现为特征方程时，这个特征方程切断形态同时从前面状态和当前状态解析出来的信息。我们的形态特征是基于 [Adaptive Chinese Word Segmentation](/paper/Adaptive_Chinese_Word_Segmentation.pdf) 中的未知单词特征。他们的想法是有效的利用词缀以及字符独立用来预测未知单词的边界。为了创建一个包含未知词词缀的表，而不是用单独的词缀阈值模型，我们首先分离出了集合中罕见词，构造了前缀表跟后缀表。对于单字词，我们搜集了给定的每个集合中每次都是以单个字符作为终结符出现的单字词表。我们也搜集了一每个训练集合中的 bi-gram 列表来区分已知和未知的字符串。把所有的特征搜集到一个集合中，用自动生成的形态表来防止我们的系统因为熟知汉语而人为的过度拟合。  
下面是用到的表：  
1) C<sub>-1</sub>C<sub>0</sub> 为在 bi-gram 表中每对特殊字符创建未知单词特征方程。当字符各自的状态和方程中相应的状态相匹配的话，方程就被激活了。这些特征方程是用来区别已知跟未知字符串的。  
2) C<sub>-1</sub>, C<sub>0</sub>, C<sub>1</sub> 单字特征方程用来匹配单字。  
3) C<sub>-1</sub> 前缀特征方程用来匹配前缀表中的前缀。  
4) C<sub>0</sub> 后缀特征方程用来匹配前缀表中的后缀。  
我们也用重复特征方程来激活给定重复的字符。我们用了两个这样的特征方程，一个是 C<sub>0</sub> 和 C<sub>1</sub> 相同，一个是 C<sub>-1</sub> 和 C<sub>1</sub> 相同。  
多数特征出现在第一顺序模版，少量的字符特征同时出现在第0顺序和第一顺序模版。我们也标准化了标点因为汉语里面有很多的标点。